--
-- PostgreSQL database dump
--

-- Dumped from database version 16.2
-- Dumped by pg_dump version 16.2

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: asset_categories; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.asset_categories (
    category_id integer NOT NULL,
    category_name character varying(100) NOT NULL
);


ALTER TABLE public.asset_categories OWNER TO postgres;

--
-- Name: asset_categories_category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.asset_categories ALTER COLUMN category_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.asset_categories_category_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: asset_distribution; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.asset_distribution (
    asset_id integer NOT NULL,
    distributed_to integer NOT NULL,
    distribution_id integer NOT NULL,
    request_id integer NOT NULL,
    distribution_date timestamp(6) without time zone NOT NULL,
    returned_date timestamp(6) without time zone,
    status character varying(255) NOT NULL,
    returned_by character varying(255),
    CONSTRAINT asset_distribution_status_check CHECK (((status)::text = ANY ((ARRAY['IN_USE'::character varying, 'RETURNED'::character varying])::text[])))
);


ALTER TABLE public.asset_distribution OWNER TO postgres;

--
-- Name: asset_distribution_distribution_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.asset_distribution ALTER COLUMN distribution_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.asset_distribution_distribution_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: asset_requests; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.asset_requests (
    asset_id integer NOT NULL,
    quantity integer NOT NULL,
    request_id integer NOT NULL,
    requested_by integer NOT NULL,
    request_date timestamp(6) without time zone NOT NULL,
    current_status character varying(255) NOT NULL,
    reason text NOT NULL,
    CONSTRAINT asset_requests_current_status_check CHECK (((current_status)::text = ANY ((ARRAY['PENDING'::character varying, 'ACCEPTED_BY_MANAGER'::character varying, 'DENIED_BY_MANAGER'::character varying, 'APPROVED_BY_DAF'::character varying, 'REJECTED_BY_DAF'::character varying, 'DISTRIBUTED'::character varying])::text[]))),
    CONSTRAINT asset_requests_quantity_check CHECK ((quantity >= 1))
);


ALTER TABLE public.asset_requests OWNER TO postgres;

--
-- Name: asset_requests_request_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.asset_requests ALTER COLUMN request_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.asset_requests_request_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: asset_types; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.asset_types (
    category_id integer NOT NULL,
    type_id integer NOT NULL,
    type_name character varying(100) NOT NULL
);


ALTER TABLE public.asset_types OWNER TO postgres;

--
-- Name: asset_types_type_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.asset_types ALTER COLUMN type_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.asset_types_type_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: assets; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.assets (
    asset_id integer NOT NULL,
    category_id integer NOT NULL,
    registered_by integer NOT NULL,
    type_id integer NOT NULL,
    updated_by integer,
    registration_date timestamp(6) without time zone NOT NULL,
    updated_at timestamp(6) without time zone,
    asset_name character varying(100) NOT NULL,
    asset_number character varying(100) NOT NULL,
    description text,
    status character varying(255) NOT NULL,
    current_division_id integer,
    CONSTRAINT assets_status_check CHECK (((status)::text = ANY ((ARRAY['AVAILABLE'::character varying, 'IN_USE'::character varying, 'UNDER_MAINTENANCE'::character varying, 'DISPOSED'::character varying])::text[])))
);


ALTER TABLE public.assets OWNER TO postgres;

--
-- Name: assets_asset_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.assets ALTER COLUMN asset_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.assets_asset_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: audit_logs; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.audit_logs (
    log_id integer NOT NULL,
    user_id integer NOT NULL,
    "timestamp" timestamp(6) without time zone NOT NULL,
    action character varying(255) NOT NULL,
    details text,
    CONSTRAINT audit_logs_action_check CHECK (((action)::text = ANY ((ARRAY['ADD_ASSET'::character varying, 'UPDATE_ASSET'::character varying, 'REQUEST_ASSET'::character varying, 'APPROVE'::character varying, 'REJECT'::character varying, 'DISTRIBUTE'::character varying, 'ARCHIVE'::character varying])::text[])))
);


ALTER TABLE public.audit_logs OWNER TO postgres;

--
-- Name: audit_logs_log_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.audit_logs ALTER COLUMN log_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.audit_logs_log_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: divisions; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.divisions (
    division_id integer NOT NULL,
    division_name character varying(100) NOT NULL,
    description text
);


ALTER TABLE public.divisions OWNER TO postgres;

--
-- Name: divisions_division_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.divisions ALTER COLUMN division_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.divisions_division_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: password_reset_token; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.password_reset_token (
    id bigint NOT NULL,
    expiry_date timestamp(6) without time zone NOT NULL,
    token character varying(255) NOT NULL,
    user_user_id integer
);


ALTER TABLE public.password_reset_token OWNER TO postgres;

--
-- Name: password_reset_token_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.password_reset_token ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.password_reset_token_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: request_approvals; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.request_approvals (
    approval_id integer NOT NULL,
    approved_by integer NOT NULL,
    request_id integer NOT NULL,
    approval_date timestamp(6) without time zone NOT NULL,
    approval_role character varying(255) NOT NULL,
    decision character varying(255) NOT NULL,
    remarks text,
    CONSTRAINT request_approvals_approval_role_check CHECK (((approval_role)::text = ANY ((ARRAY['DIVISION_MANAGER'::character varying, 'DIRECTOR_DAF'::character varying])::text[]))),
    CONSTRAINT request_approvals_decision_check CHECK (((decision)::text = ANY ((ARRAY['APPROVED'::character varying, 'REJECTED'::character varying])::text[])))
);


ALTER TABLE public.request_approvals OWNER TO postgres;

--
-- Name: request_approvals_approval_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.request_approvals ALTER COLUMN approval_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.request_approvals_approval_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    division_id integer,
    user_id integer NOT NULL,
    created_at timestamp(6) without time zone NOT NULL,
    updated_at timestamp(6) without time zone,
    phone character varying(20),
    username character varying(50) NOT NULL,
    email character varying(100) NOT NULL,
    full_name character varying(100) NOT NULL,
    password_hash character varying(255) NOT NULL,
    status character varying(255) NOT NULL,
    role character varying(255) NOT NULL,
    first_login boolean,
    otp character varying(255),
    otp_expiry timestamp(6) without time zone,
    reset_token character varying(255),
    reset_token_expiry timestamp(6) without time zone,
    CONSTRAINT users_role_check CHECK (((role)::text = ANY ((ARRAY['STAFF'::character varying, 'DIVISION_MANAGER'::character varying, 'DIRECTOR_DAF'::character varying, 'DG'::character varying, 'LOGISTIC'::character varying, 'ADMIN'::character varying])::text[]))),
    CONSTRAINT users_status_check CHECK (((status)::text = ANY ((ARRAY['ACTIVE'::character varying, 'INACTIVE'::character varying])::text[])))
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Name: users_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN user_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: asset_categories; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.asset_categories (category_id, category_name) FROM stdin;
1	IT
3	Lab
8	Office
\.


--
-- Data for Name: asset_distribution; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.asset_distribution (asset_id, distributed_to, distribution_id, request_id, distribution_date, returned_date, status, returned_by) FROM stdin;
7	22	6	1	2025-10-12 16:18:08.11432	\N	IN_USE	\N
\.


--
-- Data for Name: asset_requests; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.asset_requests (asset_id, quantity, request_id, requested_by, request_date, current_status, reason) FROM stdin;
7	2	1	22	2025-09-02 16:36:15.739113	APPROVED_BY_DAF	Need extra laptops for training
9	1	15	28	2025-10-12 17:18:07.494965	PENDING	ok
7	1	10	18	2025-09-29 00:54:56.441553	DENIED_BY_MANAGER	for use
7	1	14	21	2025-10-11 19:14:06.50826	DENIED_BY_MANAGER	i need\n
8	1	16	28	2025-10-12 20:36:04.096355	PENDING	for use
8	1	20	21	2025-10-12 21:09:49.389515	ACCEPTED_BY_MANAGER	for use
9	1	12	21	2025-10-11 17:17:35.019644	APPROVED_BY_DAF	i need
9	1	21	29	2025-11-05 16:32:45.543956	PENDING	FOR USE
\.


--
-- Data for Name: asset_types; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.asset_types (category_id, type_id, type_name) FROM stdin;
1	1	Laptop
1	2	Switch
1	6	TV
8	7	chairs
\.


--
-- Data for Name: assets; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.assets (asset_id, category_id, registered_by, type_id, updated_by, registration_date, updated_at, asset_name, asset_number, description, status, current_division_id) FROM stdin;
8	1	18	1	\N	2025-09-28 20:33:08.833907	2025-09-28 20:33:08.833907	Acer	AC834	PC	AVAILABLE	\N
9	1	18	1	\N	2025-10-11 08:42:02.720018	2025-10-11 08:42:02.72169	TV	tv1233	for camera	AVAILABLE	\N
7	1	19	1	\N	2025-09-02 15:41:07.818245	2025-10-12 16:18:08.037348	HP 5420	hp-5220-001	pc	IN_USE	7
\.


--
-- Data for Name: audit_logs; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.audit_logs (log_id, user_id, "timestamp", action, details) FROM stdin;
\.


--
-- Data for Name: divisions; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.divisions (division_id, division_name, description) FROM stdin;
6	DGO	Director General Office
7	AFU	Administration and Finance Unit
8	NSD	National Standards Division
9	NCD	National Certification Division
10	NMD	National Metrology Division
11	NQTLD	National Quality Testing Laboratory Division
\.


--
-- Data for Name: password_reset_token; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.password_reset_token (id, expiry_date, token, user_user_id) FROM stdin;
\.


--
-- Data for Name: request_approvals; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.request_approvals (approval_id, approved_by, request_id, approval_date, approval_role, decision, remarks) FROM stdin;
2	21	1	2025-09-04 10:57:45.829712	DIVISION_MANAGER	APPROVED	is needed
3	23	1	2025-09-04 11:30:18.409348	DIRECTOR_DAF	APPROVED	\N
6	21	12	2025-10-12 20:23:32.30238	DIVISION_MANAGER	APPROVED	yes
7	21	10	2025-10-12 20:24:54.992966	DIVISION_MANAGER	REJECTED	no
8	21	14	2025-10-12 20:26:18.332684	DIVISION_MANAGER	REJECTED	no
12	21	20	2025-10-12 21:10:01.990884	DIVISION_MANAGER	APPROVED	yes
13	28	12	2025-10-12 21:38:59.236737	DIRECTOR_DAF	APPROVED	yes
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (division_id, user_id, created_at, updated_at, phone, username, email, full_name, password_hash, status, role, first_login, otp, otp_expiry, reset_token, reset_token_expiry) FROM stdin;
7	20	2025-08-26 12:57:58.157355	2025-08-26 14:34:50.585114	0789519261	ally	ally222005970@gmail.com	Niyonzima Ally	$2a$10$6u4FzxOaDlLVwvdIfONlZeyJ3k.FzaJY3WxrQBaKd52oIudBo3VHy	ACTIVE	STAFF	f	\N	\N	\N	\N
7	18	2025-08-26 12:38:36.346461	2025-12-03 11:56:09.339071	0784806227	LASTking	mugabolionel8@gmail.com	MUGABO Gloire Eddy Lionel	$2a$10$mxlfO2krvHpAyNKaREDpzuWVLvHJ24RXacy1Tp.vaFwgrXG38uNyC	ACTIVE	ADMIN	f	\N	\N	\N	\N
11	26	2025-09-25 11:24:03.86914	2025-09-25 12:07:17.706355	0787696586	Ben	yonyineben@gmail.com	Yonyine Ben	$2a$10$T61rIaR6iMfFebBRO2GqoeNhEoRmCbdoBh1x3q2Tp0X5LWM.qiZR2	ACTIVE	STAFF	t	\N	\N	\N	\N
7	23	2025-09-04 11:22:51.91127	2025-09-23 14:36:11.510925	0784806222	Corbo	narwanda250@gmail.com	Corbo	$2a$10$HuGmS8f54XLoVW4RY.PXz.SssDCjVj1uJ2BzEavLUjkof4hQI8Hhy	ACTIVE	DIRECTOR_DAF	f	873532	2025-09-23 14:41:11.509779	\N	\N
11	28	2025-09-27 10:52:41.406778	2025-11-05 15:09:06.430577	07848062200	Norcy	last31352@gmail.com	Hirwa Hugues Norce	$2a$10$5A6fucUAb/.eEXdu7WLF7.q3rFgsI4nwu59AEz9QA2zup7kdgs8wK	ACTIVE	DIRECTOR_DAF	f	\N	\N	\N	\N
7	21	2025-09-02 15:49:04.106593	2025-11-05 15:11:12.651662	0784806226	LK	gloireeddylionelmugabo1@gmail.com	LASTking	$2a$10$KNn2qnfQRdNlZM2w5iAZzOBVQsXKOVp3aKRfW8p6VyeS.sYM1JtYW	ACTIVE	DIVISION_MANAGER	f	\N	\N	\N	\N
7	19	2025-08-26 12:47:16.171092	2025-11-05 15:15:12.316614	0788499734	Benigne	mugishabenigne59@gmail.com	MUGISHA Benigne	$2a$10$xb.3GvY4SLXrR8LVFNRlu.jgfpy3jQsqX0ZwP//vXuc7DB3I64XKG	ACTIVE	LOGISTIC	f	\N	\N	\N	\N
7	29	2025-11-05 16:22:56.67622	2025-11-05 16:29:15.171597	0781151147	Benjamin	shimirwabenjamin@gmail.com	Benjamin Shimirwa	$2a$10$6BGQQe1qGh9YShr/LCjza.080QffFmexnwGtpVY89aeC9ZDeIb8au	ACTIVE	STAFF	f	\N	\N	\N	\N
7	22	2025-09-02 15:53:28.372633	2025-10-11 19:00:29.296963	0784806228	MIbambwe	mgloireeddylionel@gmail.com	mibambwe	$2a$10$m5Gelz4LtgxlckA0XsnEYe6zLsdG0HQkxM28pEEQyrzcQz6aRyKMu	ACTIVE	STAFF	f	\N	\N	\N	\N
\.


--
-- Name: asset_categories_category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.asset_categories_category_id_seq', 8, true);


--
-- Name: asset_distribution_distribution_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.asset_distribution_distribution_id_seq', 6, true);


--
-- Name: asset_requests_request_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.asset_requests_request_id_seq', 21, true);


--
-- Name: asset_types_type_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.asset_types_type_id_seq', 7, true);


--
-- Name: assets_asset_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.assets_asset_id_seq', 9, true);


--
-- Name: audit_logs_log_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.audit_logs_log_id_seq', 1, false);


--
-- Name: divisions_division_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.divisions_division_id_seq', 12, true);


--
-- Name: password_reset_token_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.password_reset_token_id_seq', 1, false);


--
-- Name: request_approvals_approval_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.request_approvals_approval_id_seq', 13, true);


--
-- Name: users_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_user_id_seq', 29, true);


--
-- Name: asset_categories asset_categories_category_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_categories
    ADD CONSTRAINT asset_categories_category_name_key UNIQUE (category_name);


--
-- Name: asset_categories asset_categories_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_categories
    ADD CONSTRAINT asset_categories_pkey PRIMARY KEY (category_id);


--
-- Name: asset_distribution asset_distribution_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_distribution
    ADD CONSTRAINT asset_distribution_pkey PRIMARY KEY (distribution_id);


--
-- Name: asset_requests asset_requests_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_requests
    ADD CONSTRAINT asset_requests_pkey PRIMARY KEY (request_id);


--
-- Name: asset_types asset_types_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_types
    ADD CONSTRAINT asset_types_pkey PRIMARY KEY (type_id);


--
-- Name: assets assets_asset_number_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.assets
    ADD CONSTRAINT assets_asset_number_key UNIQUE (asset_number);


--
-- Name: assets assets_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.assets
    ADD CONSTRAINT assets_pkey PRIMARY KEY (asset_id);


--
-- Name: audit_logs audit_logs_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.audit_logs
    ADD CONSTRAINT audit_logs_pkey PRIMARY KEY (log_id);


--
-- Name: divisions divisions_division_name_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.divisions
    ADD CONSTRAINT divisions_division_name_key UNIQUE (division_name);


--
-- Name: divisions divisions_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.divisions
    ADD CONSTRAINT divisions_pkey PRIMARY KEY (division_id);


--
-- Name: password_reset_token password_reset_token_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.password_reset_token
    ADD CONSTRAINT password_reset_token_pkey PRIMARY KEY (id);


--
-- Name: request_approvals request_approvals_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.request_approvals
    ADD CONSTRAINT request_approvals_pkey PRIMARY KEY (approval_id);


--
-- Name: password_reset_token ukc5usa8rk0kgrcg40xn6pcq9w4; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.password_reset_token
    ADD CONSTRAINT ukc5usa8rk0kgrcg40xn6pcq9w4 UNIQUE (user_user_id);


--
-- Name: password_reset_token ukg0guo4k8krgpwuagos61oc06j; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.password_reset_token
    ADD CONSTRAINT ukg0guo4k8krgpwuagos61oc06j UNIQUE (token);


--
-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_email_key UNIQUE (email);


--
-- Name: users users_phone_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_phone_key UNIQUE (phone);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (user_id);


--
-- Name: users users_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_username_key UNIQUE (username);


--
-- Name: asset_requests fk2gjym2t68xuyyj201vog9jnw3; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_requests
    ADD CONSTRAINT fk2gjym2t68xuyyj201vog9jnw3 FOREIGN KEY (requested_by) REFERENCES public.users(user_id);


--
-- Name: asset_requests fk5cejjr2pou73689nvgcdckn3y; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_requests
    ADD CONSTRAINT fk5cejjr2pou73689nvgcdckn3y FOREIGN KEY (asset_id) REFERENCES public.assets(asset_id);


--
-- Name: request_approvals fk8ncspi4raiinycuxs84ao1s6k; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.request_approvals
    ADD CONSTRAINT fk8ncspi4raiinycuxs84ao1s6k FOREIGN KEY (approved_by) REFERENCES public.users(user_id);


--
-- Name: request_approvals fkaswj2v71ui2ymfa4in3oou7px; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.request_approvals
    ADD CONSTRAINT fkaswj2v71ui2ymfa4in3oou7px FOREIGN KEY (request_id) REFERENCES public.asset_requests(request_id);


--
-- Name: assets fkcwxkksxvxtrvv0sjtu5cgflep; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.assets
    ADD CONSTRAINT fkcwxkksxvxtrvv0sjtu5cgflep FOREIGN KEY (category_id) REFERENCES public.asset_categories(category_id);


--
-- Name: asset_distribution fker5onjrn23aqqcmykjlrd8nmk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_distribution
    ADD CONSTRAINT fker5onjrn23aqqcmykjlrd8nmk FOREIGN KEY (request_id) REFERENCES public.asset_requests(request_id);


--
-- Name: asset_types fkf2qv6hvtskt5m3de5r66f73yu; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_types
    ADD CONSTRAINT fkf2qv6hvtskt5m3de5r66f73yu FOREIGN KEY (category_id) REFERENCES public.asset_categories(category_id);


--
-- Name: asset_distribution fkg4u9e92hdjrxnsodrv1fyxuuw; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_distribution
    ADD CONSTRAINT fkg4u9e92hdjrxnsodrv1fyxuuw FOREIGN KEY (distributed_to) REFERENCES public.users(user_id);


--
-- Name: assets fki4knpbxl21538f8sqrt3g49; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.assets
    ADD CONSTRAINT fki4knpbxl21538f8sqrt3g49 FOREIGN KEY (updated_by) REFERENCES public.users(user_id);


--
-- Name: audit_logs fkjs4iimve3y0xssbtve5ysyef0; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.audit_logs
    ADD CONSTRAINT fkjs4iimve3y0xssbtve5ysyef0 FOREIGN KEY (user_id) REFERENCES public.users(user_id);


--
-- Name: assets fklvi1i42atmmo6od9tpumq4ycc; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.assets
    ADD CONSTRAINT fklvi1i42atmmo6od9tpumq4ycc FOREIGN KEY (current_division_id) REFERENCES public.divisions(division_id);


--
-- Name: assets fknbw7isucs136sq9la6mhs68xp; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.assets
    ADD CONSTRAINT fknbw7isucs136sq9la6mhs68xp FOREIGN KEY (type_id) REFERENCES public.asset_types(type_id);


--
-- Name: assets fkng271dhaktxms7v7i0pqfasoj; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.assets
    ADD CONSTRAINT fkng271dhaktxms7v7i0pqfasoj FOREIGN KEY (registered_by) REFERENCES public.users(user_id);


--
-- Name: password_reset_token fkpl1vwsq7gglhe77ckqd6922rn; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.password_reset_token
    ADD CONSTRAINT fkpl1vwsq7gglhe77ckqd6922rn FOREIGN KEY (user_user_id) REFERENCES public.users(user_id);


--
-- Name: asset_distribution fkqedfalpr21ecxxeioum7xb6hh; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.asset_distribution
    ADD CONSTRAINT fkqedfalpr21ecxxeioum7xb6hh FOREIGN KEY (asset_id) REFERENCES public.assets(asset_id);


--
-- Name: users fkrtcf9am40qhu4k7ihqgcbqu0y; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT fkrtcf9am40qhu4k7ihqgcbqu0y FOREIGN KEY (division_id) REFERENCES public.divisions(division_id);


--
-- PostgreSQL database dump complete
--

